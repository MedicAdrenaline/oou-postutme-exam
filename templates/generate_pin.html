{% extends 'base.html' %}
{% block title %}Generate PIN{% endblock %}

{% block content %}
<div class="container mt-5" style="color: blue; font-size: x-large; font-weight: bold;">
    <div class="flash-messages">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <div class="flash-info mt-3">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

    <div class="alert alert-info" style="color: black; font-size: xx-large; font-weight: bold;">
        Contact Admin via
        <strong><a href="https://wa.me/2348135047400" target="_blank" class="btn btn-success mt-3">Contact on WhatsApp</a></strong>
        to confirm payment and activate your PIN.
    </div>

    <div class="alert alert-info" style="color: red; font-size: x-large; font-weight: bold;">
        Note: Pay the exact amount you selected
    </div>

     <h2 class="text-center" style="color: blue; font-size: larger; font-weight: bolder;">GENERATE PIN HERE</h2>
    <form method="POST" action="{{ url_for('generate_pin') }}">
        <div class="form-container">
            <label><input type="checkbox" name="exam_mode" value="postutme">
                <span  class="text-center">Click the checkbox to proceed with paystack(â‚¦2000)</span></label><br>
        </div>
        <style>
            input[type="checkbox"] {
                width: 15px;
                height: 15px;
                transform: scale(1.5);
            }
            .text-center {
                color: black;
                font-weight: bolder;
                font-style: italic;
                font-family: 'Courier New', Courier, monospace;
            }

        </style>
        <div class="form-container">
            <h2 class="text-center" style="color: black; font-size: x-large; font-weight: bolder;">CHOOSE PAYMENT OPTION</h2>
            <select class="form-control"  style="padding: 7px 14px;" name="payment_method" id="payment_method" required>
                <option value="" disabled selected>Select payment method</option>
                <option value="paystack">Pay with Paystack</option>
                <option value="whatsapp_proof">Pay directly into bank account and send proof to Admin above</option>
                <option value="whatsapp_chat">Text me on WhatsApp for more payment options</option>
            </select>
        </div>

        <!-- Bank Transfer Details -->
        <div id="bank-details" class="form-container" style="color: black; font-size: large; font-weight: bolder;">
            <h5 class="mb-2" style="font-size: x-large; color: blue; font-weight: bolder;">Acct Details:</h5>
            <p><strong>Bank:</strong> Opay</p>
            <p><strong>Account Name:</strong> Bakre Feranmi David</p>
            <p><strong>Account Number:</strong> 8135047400</p>
            <hr>
            <p><strong>After payment, send your proof with your username or email to the WhatsApp above for PIN activation.</strong></p>
        </div>

        <!-- Proceed button always visible -->
        <button type="submit" class="btn">Proceed</button>
    </form>
</div>

<p class="switch-link">
        <a href="{{ url_for('dashboard') }}" style="color: black; font-size: x-large; 
        text-decoration: underline; font-weight: bolder;">Back to Dashboard</a>
    </p>
<script>
document.getElementById('payment_method').addEventListener('change', function () {
    var bankDetails = document.getElementById('bank-details');
    if (this.value === 'whatsapp_proof') {
        bankDetails.style.display = 'block';
    } else {
        bankDetails.style.display = 'none';
    }
});
</script>
{% endblock %}